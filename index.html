<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    
    <style>
        /* Force the page to be exactly the size of the window and prevent scrolling */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; 
            background-color: #11191f; /* Matches Pico's dark theme background */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* The 3D background layer */
        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
        }

        /* The text layer centered on top of the sphere */
        .content-overlay {
            position: relative;
            z-index: 2;
            text-align: center;
            pointer-events: none; /* Allows mouse movement to pass through to the sphere */
        }

        .content-overlay h1, 
        .content-overlay p {
            margin-bottom: 0.5rem;
        }

        /* Re-enable clicking for the button */
        .button-container {
            pointer-events: auto;
            margin-top: 1.5rem;
        }
        
        /* Make the sphere slightly transparent so text is legible */
        canvas {
            opacity: 0.8;
        }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <div class="content-overlay">
        <main class="container">
            <h1>Lennart Vetter</h1>
            <p>Developer | Machine Learning Engineer</p>
            
            <div class="button-container">
                <a href="cv.pdf" role="button" class="contrast">Download CV</a>
            </div>
        </main>
    </div>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';

        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        
        // Camera setup - aspect ratio follows window size
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        // Renderer setup with transparency
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        container.appendChild(renderer.domElement);

        // Create Spherical Point Cloud
        const geometry = new THREE.BufferGeometry();
        const vertices = [];
        const pointCount = 1000;

        for (let i = 0; i < pointCount; i++) {
            // Fibonacci Sphere algorithm for even distribution
            const phi = Math.acos(-1 + (2 * i) / pointCount);
            const theta = Math.sqrt(pointCount * Math.PI) * phi;

            vertices.push(
                2.5 * Math.cos(theta) * Math.sin(phi), // x
                2.5 * Math.sin(theta) * Math.sin(phi), // y
                2.5 * Math.cos(phi)                    // z
            );
        }
        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

        // Material styling - Adjust color and size here
        const material = new THREE.PointsMaterial({ 
            color: 0x3b5bdb, 
            size: 0.04,
            transparent: true,
            opacity: 0.8
        });
        
        const points = new THREE.Points(geometry, material);
        scene.add(points);

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            // Slow, elegant rotation
            points.rotation.y += 0.0015;
            points.rotation.x += 0.0008;
            renderer.render(scene, camera);
        }

        // Responsive Resize handling
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>